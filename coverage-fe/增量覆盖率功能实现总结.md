# å¢é‡è¦†ç›–ç‡åŠŸèƒ½å®ç°æ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. ä¿®æ”¹çš„æ–‡ä»¶

#### `src/config/api.js`
- âœ… æ·»åŠ å¢é‡è¦†ç›–ç‡ç›¸å…³çš„ API ç«¯ç‚¹
- âœ… æ·»åŠ é…ç½®ç®¡ç†ç«¯ç‚¹

#### `src/components/CoverageList.jsx`
- âœ… æ·»åŠ åŸºå‡†åˆ†æ”¯å’ŒåŸºå‡† Commit åˆ—
- âœ… ä½¿ç”¨åˆ†ç»„è¡¨å¤´åŒºåˆ†å…¨é‡å’Œå¢é‡è¦†ç›–ç‡
- âœ… æ·»åŠ å¢é‡è¦†ç›–ç‡ä¸‰ä¸ªæ•°æ®åˆ—ï¼ˆæ–°å¢å·²è¦†ç›–ã€æ–°å¢æ€»è¡Œæ•°ã€è¦†ç›–ç‡ï¼‰
- âœ… å®ç°å¼‚æ­¥å¹¶å‘åŠ è½½å¢é‡è¦†ç›–ç‡æ•°æ®
- âœ… å¢é‡è¦†ç›–ç‡åˆ—å¯ç‚¹å‡»è·³è½¬åˆ°è¯¦æƒ…é¡µ
- âœ… æ“ä½œåˆ—æ–°å¢"å¢é‡è¯¦æƒ…"æŒ‰é’®

#### `src/App.jsx`
- âœ… å¯¼å…¥ DiffCoverageDetail ç»„ä»¶
- âœ… æ·»åŠ  `/diff/:id` è·¯ç”±

### 2. æ–°å¢çš„æ–‡ä»¶

#### `src/components/DiffCoverageDetail.jsx`
- âœ… å¢é‡è¦†ç›–ç‡è¯¦æƒ…é¡µé¢ç»„ä»¶
- âœ… æ˜¾ç¤º 6 ä¸ªç»Ÿè®¡å¡ç‰‡ï¼ˆå¢é‡è¦†ç›–ç‡ã€æ–°å¢å·²è¦†ç›–ã€æ–°å¢æœªè¦†ç›–ã€è¦†ç›–æå‡ã€è¦†ç›–é€€åŒ–ã€å½±å“æ–‡ä»¶ï¼‰
- âœ… æ–‡ä»¶è¯¦æƒ…è¡¨æ ¼å±•ç¤º
- âœ… çŠ¶æ€è¯´æ˜å’Œå›¾ä¾‹
- âœ… å“åº”å¼å¸ƒå±€

#### `src/components/DiffCoverageDetail.css`
- âœ… å¢é‡è¦†ç›–ç‡è¯¦æƒ…é¡µæ ·å¼

#### `DIFF_COVERAGE_FEATURE.md`
- âœ… è¯¦ç»†çš„åŠŸèƒ½ä½¿ç”¨è¯´æ˜æ–‡æ¡£

#### `å¢é‡è¦†ç›–ç‡åŠŸèƒ½å®ç°æ€»ç»“.md`
- âœ… æœ¬æ–‡æ¡£

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### åˆ—è¡¨é¡µ (http://localhost:3000)

**æ–°å¢å±•ç¤ºåˆ—ï¼š**
- åŸºå‡†åˆ†æ”¯
- åŸºå‡† Commit
- å…¨é‡è¦†ç›–ç‡æ•°æ®ï¼ˆåˆ†ç»„ï¼‰
  - è¦†ç›–è¡Œ
  - æ€»æœ‰æ•ˆè¡Œ
  - è¦†ç›–ç‡
- å¢é‡ç³»ç»Ÿè°ƒæµ‹è¦†ç›–ç‡æ•°æ®ï¼ˆåˆ†ç»„ï¼Œæ–°å¢ï¼‰
  - æ–°å¢å·²è¦†ç›–ï¼ˆå¯ç‚¹å‡»ï¼‰
  - æ–°å¢æ€»è¡Œæ•°ï¼ˆå¯ç‚¹å‡»ï¼‰
  - è¦†ç›–ç‡ï¼ˆå¯ç‚¹å‡»ï¼‰

**æ“ä½œåˆ—ï¼š**
- å…¨é‡è¯¦æƒ…ï¼ˆåŸæœ‰ï¼‰
- å¢é‡è¯¦æƒ…ï¼ˆæ–°å¢ï¼‰

### å¢é‡è¯¦æƒ…é¡µ (http://localhost:3000/diff/:id)

**ç»Ÿè®¡å¡ç‰‡ï¼ˆ6ä¸ªï¼‰ï¼š**
- å¢é‡è¦†ç›–ç‡
- æ–°å¢å·²è¦†ç›–
- æ–°å¢æœªè¦†ç›–
- è¦†ç›–æå‡
- è¦†ç›–é€€åŒ–
- å½±å“æ–‡ä»¶

**æ–‡ä»¶è¯¦æƒ…è¡¨æ ¼ï¼š**
- æ–‡ä»¶è·¯å¾„
- æ–°å¢æœªè¦†ç›–
- æ–°å¢å·²è¦†ç›–
- è¦†ç›–é€€åŒ–
- è¦†ç›–æå‡

## ğŸ“Š æ•°æ®æµç¨‹

```
ç”¨æˆ·è®¿é—®åˆ—è¡¨é¡µ
    â†“
åŠ è½½æŠ¥å‘Šåˆ—è¡¨
    â†“
å¹¶å‘è¯·æ±‚å¢é‡è¦†ç›–ç‡æ•°æ®
    â†“
æ¸²æŸ“åˆ—è¡¨ï¼ˆå…¨é‡ + å¢é‡ï¼‰
    â†“
ç”¨æˆ·ç‚¹å‡»å¢é‡è¯¦æƒ…
    â†“
è·³è½¬åˆ° /diff/:id
    â†“
è·å–è¯¦ç»†æ•°æ®
    â†“
å±•ç¤ºç»Ÿè®¡å’Œæ–‡ä»¶åˆ—è¡¨
```

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### 1. å¯åŠ¨å‰ç«¯

```bash
cd coverage-fe
npm run dev
```

### 2. è®¿é—®é¡µé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000

### 3. æŸ¥çœ‹å¢é‡è¦†ç›–ç‡

- **æ–¹å¼1**ï¼šåœ¨åˆ—è¡¨é¡µç‚¹å‡»å¢é‡è¦†ç›–ç‡åˆ—çš„æ•°å­—
- **æ–¹å¼2**ï¼šåœ¨åˆ—è¡¨é¡µç‚¹å‡»"å¢é‡è¯¦æƒ…"æŒ‰é’®
- **æ–¹å¼3**ï¼šç›´æ¥è®¿é—® `http://localhost:3000/diff/[report_id]`

## ğŸ’¡ æŠ€æœ¯äº®ç‚¹

### 1. å¼‚æ­¥å¹¶å‘åŠ è½½
- ä½¿ç”¨ `Promise.allSettled` å¹¶å‘åŠ è½½æ‰€æœ‰æŠ¥å‘Šçš„å¢é‡è¦†ç›–ç‡
- ä¸é˜»å¡é¡µé¢æ¸²æŸ“
- éƒ¨åˆ†å¤±è´¥ä¸å½±å“æ•´ä½“å±•ç¤º

### 2. åˆ†ç»„è¡¨å¤´
- ä½¿ç”¨ Ant Design Table çš„ `children` å±æ€§å®ç°åˆ†ç»„è¡¨å¤´
- æ¸…æ™°åŒºåˆ†å…¨é‡å’Œå¢é‡è¦†ç›–ç‡æ•°æ®

### 3. å“åº”å¼è®¾è®¡
- ä½¿ç”¨ Ant Design çš„ Grid ç³»ç»Ÿ
- æ”¯æŒå„ç§å±å¹•å°ºå¯¸

### 4. è·¯ç”±å¤ç”¨
- å¤ç”¨ç°æœ‰çš„è·¯ç”±ç»“æ„
- æ— éœ€é¢å¤–é…ç½®

## ğŸ“ æ–‡ä»¶æ¸…å•

### ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰
1. `src/config/api.js` - API é…ç½®
2. `src/components/CoverageList.jsx` - åˆ—è¡¨ç»„ä»¶
3. `src/App.jsx` - è·¯ç”±é…ç½®

### æ–°å¢çš„æ–‡ä»¶ï¼ˆ4ä¸ªï¼‰
1. `src/components/DiffCoverageDetail.jsx` - å¢é‡è¯¦æƒ…ç»„ä»¶
2. `src/components/DiffCoverageDetail.css` - è¯¦æƒ…æ ·å¼
3. `DIFF_COVERAGE_FEATURE.md` - åŠŸèƒ½æ–‡æ¡£
4. `å¢é‡è¦†ç›–ç‡åŠŸèƒ½å®ç°æ€»ç»“.md` - æœ¬æ–‡æ¡£

**æ€»è®¡ï¼š7 ä¸ªæ–‡ä»¶**

## âœ¨ ä¸åŸ standalone HTML çš„åŒºåˆ«

### Standalone HTML ç‰ˆæœ¬
- âŒ éœ€è¦å•ç‹¬è®¿é—® `frontend/index.html`
- âŒ æ ·å¼å’ŒåŠŸèƒ½ç›¸å¯¹ç®€å•
- âŒ ä¸èƒ½ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

### React é›†æˆç‰ˆæœ¬ï¼ˆå½“å‰ï¼‰
- âœ… ç›´æ¥åœ¨ http://localhost:3000 è®¿é—®
- âœ… ä½¿ç”¨ Ant Design ç»„ä»¶åº“ï¼ŒUI ä¸“ä¸šç¾è§‚
- âœ… å®Œå…¨é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ
- âœ… å…±äº«è·¯ç”±ã€çŠ¶æ€ã€é…ç½®
- âœ… å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯

## ğŸ¨ UI å¯¹æ¯”

### åˆ—è¡¨é¡µè¡¨å¤´ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
â”‚ä»“åº“ â”‚åˆ†æ”¯  â”‚ Commit â”‚ å…¨é‡è¦†ç›–ç‡æ•°æ®    â”‚ å¢é‡ç³»ç»Ÿè°ƒæµ‹è¦†ç›–ç‡æ•°æ®    â”‚ æ“ä½œ â”‚
â”‚     â”‚      â”‚        â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚     â”‚      â”‚        â”‚è¦†ç›–è¡Œâ”‚æ€»è¡Œæ•°â”‚è¦†ç›–â”‚æ–°å¢  â”‚æ–°å¢  â”‚è¦†ç›–  â”‚      â”‚
â”‚     â”‚      â”‚        â”‚      â”‚      â”‚ç‡  â”‚å·²è¦†ç›–â”‚æ€»è¡Œæ•°â”‚ç‡    â”‚      â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### API ç«¯ç‚¹ï¼ˆå·²è‡ªåŠ¨é…ç½®ï¼‰
```javascript
DIFF_COVERAGE: (id) => `/api/v1/coverage/reports/${id}/diff`
MONACO_DATA: (id) => `/api/v1/coverage/reports/${id}/monaco`
REPO_CONFIG: (repoId) => `/api/v1/coverage/config/${repoId}`
UPDATE_BASE_COMMIT: (id) => `/api/v1/coverage/reports/${id}/base-commit`
```

### è·¯ç”±é…ç½®ï¼ˆå·²è‡ªåŠ¨æ·»åŠ ï¼‰
```javascript
<Route path="/diff/:id" element={<DiffCoverageDetail />} />
```

## ğŸ“ ä½¿ç”¨å»ºè®®

### æœ€ä½³å®è·µ
1. å®šæœŸæŸ¥çœ‹å¢é‡è¦†ç›–ç‡ï¼Œç¡®ä¿æ–°å¢ä»£ç è´¨é‡
2. å…³æ³¨"æ–°å¢æœªè¦†ç›–"æ•°å­—ï¼Œè¡¥å……æµ‹è¯•ç”¨ä¾‹
3. åŠæ—¶å¤„ç†"è¦†ç›–é€€åŒ–"æƒ…å†µ
4. è®¾ç½®å¢é‡è¦†ç›–ç‡é—¨ç¦ï¼ˆå»ºè®® â‰¥ 80%ï¼‰

### CI/CD é›†æˆ
```bash
# åœ¨ CI ä¸­æ£€æŸ¥å¢é‡è¦†ç›–ç‡
REPORT_ID=$(get_latest_report_id)
RATE=$(curl -s "http://api/reports/${REPORT_ID}/diff" | jq '.summary.incremental_coverage_rate')

if (( $(echo "$RATE < 80" | bc -l) )); then
  echo "âŒ å¢é‡è¦†ç›–ç‡ä¸è¶³: ${RATE}%"
  exit 1
fi
```

## ğŸ› å·²çŸ¥é—®é¢˜

æš‚æ— 

## ğŸš§ åç»­ä¼˜åŒ–

1. æ·»åŠ  Monaco Editor é›†æˆï¼Œå¯è§†åŒ–æ˜¾ç¤ºä»£ç è¦†ç›–æƒ…å†µ
2. æ·»åŠ å¢é‡è¦†ç›–ç‡è¶‹åŠ¿å›¾è¡¨
3. æ·»åŠ å¯¼å‡ºåŠŸèƒ½
4. ä¼˜åŒ–å¤§æ•°æ®é‡åœºæ™¯çš„æ€§èƒ½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- æ–‡æ¡£ï¼š`DIFF_COVERAGE_FEATURE.md`
- åç«¯æ–‡æ¡£ï¼š`../coverage-platform/DIFF_COVERAGE_README.md`
- é‡åˆ°é—®é¢˜è¯·æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°å’Œåç«¯æ—¥å¿—

---

**å®ç°å®Œæˆï¼** âœ¨

ç°åœ¨æ‰“å¼€ http://localhost:3000 å°±èƒ½çœ‹åˆ°å®Œæ•´çš„å¢é‡è¦†ç›–ç‡åŠŸèƒ½äº†ï¼

